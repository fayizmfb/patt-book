{% extends "base.html" %}

{% block title %}Add Credit Entry - Retail App{% endblock %}

{% block extra_css %}
<style>
    .due-days-selector {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 10px;
    }

    .due-day-btn {
        padding: 10px 16px;
        border: 2px solid #ddd;
        background: white;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
        color: #666;
        min-width: 60px;
        text-align: center;
    }

    .due-day-btn:hover {
        border-color: #3498db;
        color: #3498db;
    }

    .due-day-btn.selected {
        background: #3498db;
        border-color: #3498db;
        color: white;
    }

    .due-day-btn.selected:hover {
        background: #2980b9;
        border-color: #2980b9;
    }
</style>
{% endblock %}

{% block content %}
<div class="card">
    <h2>Add Credit Entry</h2>
    <p style="color: #666; margin-bottom: 20px;">
        Enter credit details. Select due days from the options below.
    </p>

    <form method="POST" action="{{ url_for('add_credit') }}" id="creditForm">
        <div class="form-group">
            <label for="customer_id">Customer *</label>
            <select id="customer_id" name="customer_id" required>
                <option value="">Select a customer</option>
                {% for customer in customers %}
                <option value="{{ customer['id'] }}" {% if selected_customer and selected_customer['id'] == customer['id'] %}selected{% endif %}>{{ customer['name'] }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="amount">Credit Amount *</label>
            <input type="number" id="amount" name="amount" step="0.01" min="0" required placeholder="Enter amount">
        </div>

        <div class="form-group">
            <label>Due Days *</label>
            <small style="color: #666; display: block; margin-bottom: 10px;">
                Select the number of days from today until payment is due
            </small>
            <div class="due-days-selector">
                <button type="button" class="due-day-btn" data-days="7">7 days</button>
                <button type="button" class="due-day-btn" data-days="10">10 days</button>
                <button type="button" class="due-day-btn" data-days="14">14 days</button>
                <button type="button" class="due-day-btn" data-days="21">21 days</button>
                <button type="button" class="due-day-btn" data-days="25">25 days</button>
                <button type="button" class="due-day-btn selected" data-days="30">30 days</button>
                <button type="button" class="due-day-btn" data-days="45">45 days</button>
                <button type="button" class="due-day-btn" data-days="60">60 days</button>
            </div>
            <input type="hidden" id="due_days" name="due_days" value="30" required>
        </div>

        <div class="actions">
            <button type="submit" class="btn-success">Add Credit Entry</button>
            <a href="{{ url_for('index') }}" class="btn">Cancel</a>
        </div>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const dueDayButtons = document.querySelectorAll('.due-day-btn');
    const dueDaysInput = document.getElementById('due_days');

    dueDayButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Remove selected class from all buttons
            dueDayButtons.forEach(btn => btn.classList.remove('selected'));

            // Add selected class to clicked button
            this.classList.add('selected');

            // Update hidden input value
            const days = this.getAttribute('data-days');
            dueDaysInput.value = days;
        });
    });
});
</script>
{% endblock %}

