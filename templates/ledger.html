{% extends "base.html" %}

{% block title %}{{ customer['name'] }} - Ledger{% endblock %}

{% block content %}
<div class="card">
    <h2>Customer Ledger: {{ customer['name'] }}</h2>
    
    <div style="background-color: #f8f9fa; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
        <table style="max-width: 600px; background-color: transparent;">
            <tr>
                <th style="width: 200px; background-color: transparent; color: #333;">Customer ID</th>
                <td style="background-color: transparent;">{{ customer['id'] }}</td>
            </tr>
            <tr>
                <th style="background-color: transparent; color: #333;">Phone</th>
                <td style="background-color: transparent;">{{ customer['phone'] or '-' }}</td>
            </tr>
            <tr>
                <th style="background-color: transparent; color: #333;">Address</th>
                <td style="background-color: transparent;">{{ customer['address'] or '-' }}</td>
            </tr>
        </table>
    </div>
    
    <h3 style="margin-top: 30px; margin-bottom: 15px;">Summary</h3>
    <table style="max-width: 500px;">
        <tr>
            <th>Total Credits</th>
            <td class="text-right"><strong>{{ "%.2f"|format(total_credits) }}</strong></td>
        </tr>
        <tr>
            <th>Total Payments</th>
            <td class="text-right">{{ "%.2f"|format(total_payments) }}</td>
        </tr>
        <tr style="background-color: #e8f4f8;">
            <th>Outstanding Balance</th>
            <td class="text-right">
                <strong style="font-size: 18px; color: #2c3e50;">{{ "%.2f"|format(outstanding_balance) }}</strong>
            </td>
        </tr>
    </table>
    
    <h3 style="margin-top: 30px; margin-bottom: 15px;">Credit Entries</h3>
    {% if credits %}
    <table>
        <thead>
            <tr>
                <th>Credit ID</th>
                <th>Amount</th>
                <th>Entry Date</th>
            </tr>
        </thead>
        <tbody>
            {% for credit in credits %}
            <tr>
                <td>{{ credit['id'] }}</td>
                <td class="text-right">{{ "%.2f"|format(credit['amount']) }}</td>
                <td>{{ credit['entry_date'] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="color: #666; padding: 20px;">No credit entries found.</p>
    {% endif %}
    
    <h3 style="margin-top: 30px; margin-bottom: 15px;">Payment Entries</h3>
    {% if payments %}
    <table>
        <thead>
            <tr>
                <th>Payment ID</th>
                <th>Amount</th>
                <th>Payment Date</th>
            </tr>
        </thead>
        <tbody>
            {% for payment in payments %}
            <tr>
                <td>{{ payment['id'] }}</td>
                <td class="text-right">{{ "%.2f"|format(payment['amount']) }}</td>
                <td>{{ payment['payment_date'] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="color: #666; padding: 20px;">No payment entries found.</p>
    {% endif %}
    
    <div class="actions" style="margin-top: 30px;">
        <a href="{{ url_for('index') }}" class="btn">Back to Customers</a>
    </div>
</div>
{% endblock %}

